---
title: "Chicago Equality"
author: "Sofia Marie Mascia"
date: "04/12/2018"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(shiny)
library(shinydashboard)
library(tidyverse)
library(stringr)
library(ggplot2)
library(dplyr)
library(base)
library(devtools)
library(urbnmapr)

```

```{r}
data <- read.csv("chicago-inequality.csv", na.strings=c(""," ","NA"))
```

```{r}
clean_data <- data %>% 
  drop_na(geo_name) %>% 
  select(geo_name, adult_smoking_2015, adult_smoking_2016, homicide_rate_2015, 
         homicide_rate_2016, income_2015, income_2016) %>% 
  group_by(geo_name) %>% 
  mutate(state = str_sub(geo_name, -2, -1)) %>% 
  filter(state == "IL") %>% 
  mutate_all(funs(replace(., is.na(.), 0))) %>% 
  filter(homicide_rate_2015 >= 3, homicide_rate_2016 >= 3)


 ## Later - find a way to clean county column: str_split(geo_name, "County, ", n=2)
  
 clean_data %>% write_rds("demo_app/chicago_inequality.rds")
```


```{r}

#Cleaning data for income map
#INCOME WHITE
income_white <- read.csv("income_white.csv", na.strings=c(""," ","NA"))

income_white <- income_white %>% 
  filter(year == 2016)
 
income_white %>% write_rds("demo_app/income_white.rds")

## Loading County Data
household_data <- left_join(countydata, counties, by = "county_fips") 

```


